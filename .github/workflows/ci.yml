name: CI

on:
  push:
    branches: [main]
  pull_request:
    branches:
      [
        main,
        feat/*,
        fix/*,
        docs/*,
        style/*,
        refactor/*,
        perf/*,
        test/*,
        chore/*,
        copilot/*,
        claude/*,
      ]

jobs:
  Lint:
    name: ShellCheck Lint
    runs-on: ubuntu-latest
    permissions:
      contents: read

    steps:
      - name: Checkout code
        uses: actions/checkout@v6

      - name: Run ShellCheck
        uses: ludeeus/action-shellcheck@2.0.0
        with:
          severity: warning
          ignore_paths: .git

      - name: Install shfmt
        run: |
          curl -sS https://webi.sh/shfmt | sh
          echo "$HOME/.local/bin" >> "$GITHUB_PATH"

      - name: Run shfmt check
        run: |
          find . -name "*.sh" -type f -print0 | xargs -0 shfmt -d -i 2

  Test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v6
      - name: Run tests
        run: echo "Add your test commands here"
